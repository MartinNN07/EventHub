@using EventHub.Web.Models.Event
@model AdminEventViewModel

@{
	ViewData["Title"] = "Delete Event";
}

<div class="container py-4">
	<div class="row justify-content-center">
		<div class="col-lg-8">
			<div class="card shadow-sm border-danger">
				<div class="card-header bg-danger text-white">
					<h4 class="mb-0">@ViewData["Title"]</h4>
				</div>
				<div class="card-body">
					<div class="alert alert-warning">
						<i class="bi bi-exclamation-triangle"></i> Are you sure you want to delete this event?
					</div>

					<dl class="row">
						<dt class="col-sm-3">Title:</dt>
						<dd class="col-sm-9">@Model.Title</dd>

						<dt class="col-sm-3">Organizer:</dt>
						<dd class="col-sm-9">@Model.Organizer</dd>

						<dt class="col-sm-3">Date:</dt>
						<dd class="col-sm-9">@Model.FormattedDate</dd>

						<dt class="col-sm-3">Venue:</dt>
						<dd class="col-sm-9">@Model.VenueName</dd>

						<dt class="col-sm-3">Price:</dt>
						<dd class="col-sm-9">@Model.FormattedPrice</dd>

						<dt class="col-sm-3">Categories:</dt>
						<dd class="col-sm-9">
							@if (Model.CategoryNames.Any())
							{
								foreach (var category in Model.CategoryNames)
								{
									<span class="badge bg-secondary me-1">@category</span>
								}
							}
							else
							{
								<span class="text-muted">None</span>
							}
						</dd>

						<dt class="col-sm-3">Bookings:</dt>
						<dd class="col-sm-9">
							<span class="badge bg-info">@Model.TotalBookings ticket(s)</span>
						</dd>

						<dt class="col-sm-3">Status:</dt>
						<dd class="col-sm-9">
							@if (Model.IsPastEvent)
							{
								<span class="badge bg-secondary">Past Event</span>
							}
							else
							{
								<span class="badge bg-success">Upcoming Event</span>
							}
						</dd>
					</dl>

					@if (Model.TotalBookings > 0)
					{
						<div class="alert alert-danger">
							<i class="bi bi-exclamation-circle"></i> <strong>Warning:</strong> This event has @Model.TotalBookings booking(s). You must cancel all bookings before deleting this event.
						</div>
					}

					<form asp-action="Delete" method="post">
						<input type="hidden" asp-for="Id" />
						<div class="d-flex justify-content-between mt-4">
							<a asp-action="Index" class="btn btn-secondary">
								<i class="bi bi-arrow-left"></i> Back to List
							</a>
							<button type="submit" class="btn btn-danger" @(Model.TotalBookings > 0 ? "disabled" : "")>
								<i class="bi bi-trash"></i> Delete Event
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
